function instagramFetch(e){fetchCMD({access_token:e.accessToken},e)}function fetchCMD(e,t){var a="",o="";if("user"!=t.mode)return alert("Please select user mode and configure your user settings."),!1;a="https://graph.facebook.com/v7.0/"+t.userID+"/media?access_token="+t.accessToken+"&fields="+t.fields,o="https://graph.facebook.com/v7.0/"+t.userID+"/?access_token="+t.accessToken+"&fields=profile_picture_url,name",jQuery.getJSON(o,e,function(e){t.profile_picture_url=e.profile_picture_url,t.profile_name=e.name}).fail(function(e){alert("A "+e.status+" error has occured attempting to fetch your profile photo. Please check your credentials and try again.")}),jQuery.getJSON(a,e,function(e){onPhotoLoaded(e,t)}).fail(function(e){alert("A "+e.status+" error has occured attempting to fetch your photos. Please check your credentials and try again.")})}function instagramUsersLoadMore(e){var t={access_token:e.accessToken},a=e.instagramBrowserNextMax;jQuery.getJSON(a,t,function(t){onPhotoLoaded(t,e)}).fail(function(e){alert("A "+e.status+" error has occured attempting to fetch your photos. Please check your credentials and try again.")})}function startVideoPlayer(e){if(e.video){var t=["playpause","progress","volume","fullscreen"];0==e.showVideoControls&&(t=[""]),jQuery(".instagram-element-video").not(".converted").mediaelementplayer({alwaysShowControls:!1,videoVolume:"horizontal",features:t}),jQuery(".instagram-element-video").addClass("converted"),0==e.showVideoControls&&jQuery(".mejs-controls").remove()}}function startFancybox(e){jQuery(".instagram-photo").fancybox({openEffect:"elastic",closeEffect:"elastic",helpers:{title:{type:"inside"}}})}function convertDate(e,t){var a=parseInt(e);return a=new Date(a),a=dateFormat(a,t)}function parseDate(e){const t=Date.parse(e);return isNaN(t)?Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," ")):t}function onPhotoLoaded(e,t,a){if(e.paging&&e.paging.next?t.instagramBrowserNextMax=e.paging.next:t.instagramBrowserNextMax="Empty",t.elementComplete=!1,e.data[0]){var o=e.data;if(""!=t.element.html())var n=!0;else n=!1;if(o.length>0){for(var r in o)if(t.limit<20&&r>=t.limit);else{var s=o[r];if("contest"==t.mode&&0==s.user_has_liked)continue;var i="",l="";t.profile_name&&""!=t.profile_name||(t.profile_name=s.username),t.showUsername&&(l+="<span class='username-ui'>"+t.profile_name+"</span><br />"),t.showDate&&(s.created_time=parseDate(s.timestamp),l+="<span class='date-ui'>"+convertDate(s.created_time,"dddd, mmmm dS, yyyy, h:MM TT")+"</span>"),t.showDescription&&s.caption&&(l+="<span class='description-ui'>"+s.caption.replace(/"/g,"'")+".</span>"),t.showLikes&&(l+=" <span class='likes-ui'>("+s.like_count+" Likes)</span>"),t.showComments&&(l+=" <span class='comments-ui'>("+s.comments_count+" Comments)</span>"),t.showLocation&&s.location&&(l+="<br /><span class='location-ui'>Location: "+s.location.name.replace(/"/g,"'")+"</span>"),t.showLink&&null!=s.link&&(l+="<a target='_blank' class='link-ui' href='"+s.link+"'> View Photo</a>");var m="None";"VIDEO"==s.media_type&&(m=s.media_url);var c=t.element.selector.replace(".","");c=c.replace("#",""),"VIDEO"==s.media_type?(i='<a class="instagram-photo video" id="p'+s.id+'" href="#video-'+s.id+'" data-name="'+s.username+'" data-fancybox-title="'+l+" &lt;a target=&quot;_blank&quot; href=&quot;"+s.permalink+'&quot;&gt;View Post&lt;/a&gt;" data-created="'+s.created_time+'" data-author="'+s.username+'" data-likes="'+s.like_count+'" data-comments="'+s.comments_count+'" data-video="'+m+'" data-profile="'+t.profile_picture_url+'" rel="group-'+c+'">',i+='<img src="'+s.thumbnail_url+'" />',i+='<span class="element-meta"><strong>'+s.username+"</strong><span>"+t.profile_name+"</span></span>",i+='<span class="icon">Video</span>',i+='<div id="video-'+s.id+'" style="display:none; height:auto; width:640px;">',i+='<video class="instagram-element-video" height="640" width="640" poster="'+s.thumbnail_url+'">',i+='<source src="'+m+'"></source>',i+="</video>",i+="</div>",i+="</a>"):(i='<a class="instagram-photo image" id="p'+s.id+'" href="'+s.media_url+'" data-name="'+s.username+'" data-fancybox-title="'+l+" &lt;a target=&quot;_blank&quot; href=&quot;"+s.permalink+'&quot;&gt;View Post&lt;/a&gt;" data-created="'+s.created_time+'" data-author="'+s.username+'" data-likes="'+s.like_count+'" data-comments="'+s.comments_count+'" data-profile="'+t.profile_picture_url+'" rel="group-'+c+'">',i+='<img src="'+s.media_url+'" />',i+='<span class="element-meta"><strong>'+s.username+"</strong><span>"+t.profile_name+"</span></span>",i+='<span class="icon">Image</span>',i+="</a>"),jQuery(i).appendTo(t.element)}var u=jQuery(".instagram-photo").length-1;0==n&&0==t.isDemo&&jQuery(".instagram-photo").hide(),jQuery(".instagram-photo").each(function(e){currentPhoto=jQuery(this),currentPhoto.delay(t.delayInterval*e).fadeIn(t.speed),t.limit<20&&r>=t.limit||(t.element.find(".seachInstagramLoadMoreContainer").remove(),e==u&&"Empty"!=t.instagramBrowserNextMax&&jQuery('<div class="seachInstagramLoadMoreContainer"><a class="seachInstagramLoadMore btn btn-inverse">Load More</a></div>').appendTo(t.element),"off"==a&&jQuery(".seachInstagramLoadMoreContainer").remove())}),0!=t.elementComplete&&"contest"!=t.galleryMode||("multiuser"==t.mode||"multitag"==t.mode?(t.multiCompleteCount>=t.multiCompleteTotal&&(displayGalleryByType(t),t.elementComplete=!0),t.multiCompleteCount++):(displayGalleryByType(t),t.elementComplete=!0)),startVideoPlayer(t)}else alert("empty")}else alert(e.meta.error_message)}function displayGalleryByType(e){var t={BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};"classic"==e.galleryMode&&(startFancybox(e),jQuery(document).on({mouseenter:function(){var e=jQuery(this).find(".element-meta").outerHeight();jQuery(this).find(".element-meta").stop().animate({opacity:1,top:"50%","margin-top":"-"+e/2+"px"},300),t.any()&&jQuery(this).trigger("click")},mouseleave:function(){jQuery(this).find(".element-meta").stop().animate({opacity:0,top:"90%"},300,function(){jQuery(this).removeAttr("style")})}},".instagram-element .instagram-photo"))}jQuery.fn.instagramElement=function(e){var t={accessToken:"",mode:"user",userID:"",tag:"sports",locationID:"",galleryMode:"classic",video:!1,speed:700,delayInterval:80,showVideoControls:!1,count:20,limit:20,showUsername:!0,showDescription:!0,showLikes:!0,showComments:!0,showLocation:!0,showDate:!0,showLink:!0};return t.element=jQuery(this),t.instagramBrowserNextMax="",t.elementComplete=!1,t.isDemo=!1,t.profile_picture_url="",t.profile_name="",t.fields="caption,children,comments,comments_count,id,ig_id,like_count,media_type,media_url,permalink,thumbnail_url,timestamp,username",t.element.attr("id")?t.element.selector="#"+t.element.attr("id"):t.element.selector="."+t.element.attr("class"),jQuery.extend(t,e),this.each(function(){jQuery(document).ready(function(){t.element.addClass("instagram-element"),instagramFetch(t),jQuery(document).on("click",t.element.selector+" .seachInstagramLoadMore",function(){"tag"==t.mode||"contest"==t.mode?instagramTagsLoadMore(t):"user"==t.mode?instagramUsersLoadMore(t):"location"==t.mode?instagramLocationLoadMore(t):"liked"==t.mode&&instagramLikedLoadMore(t)})})})};